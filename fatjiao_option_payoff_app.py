import streamlit as st
import numpy as np
import plotly.graph_objs as go

st.set_page_config(page_title="FATJIAO Option Payoff Assistant", layout="wide")
st.title("ğŸ“ˆ FATJIAO Option Payoff Assistant")

# ===== é¢„è®¾ç­–ç•¥å­—å…¸ï¼ˆå«é€šä¿—è¯´æ˜ä¸å®ä¾‹ï¼‰ =====
PREDEFINED_STRATEGIES = {
    "None": {
        "legs": [],
        "description": "",
        "example": ""
    },
    "Covered Call (å¤‡å…‘çœ‹æ¶¨)": {
        "legs": [
            {'type': 'call', 'position': 'short', 'strike': 105.0, 'premium': 3.0, 'contracts': 1},
        ],
        "description": "ä½ å·²ç»æœ‰ä¸€ä»½è‚¡ç¥¨ï¼ŒåŒæ—¶å–å‡ºä¸€ä¸ªçœ‹æ¶¨æœŸæƒï¼Œåˆ«äººç»™ä½ é’±è®©ä½ åœ¨è‚¡ç¥¨æ¶¨åˆ°ä¸€å®šä»·æ ¼æ—¶ä»¥é‚£ä¸ªä»·æ ¼å–ç»™ä»–ã€‚è¿™æ ·å…ˆæ‹¿é’±ï¼Œä½†è‚¡ç¥¨æ¶¨å¤ªå¤šæ—¶èµšçš„æœ‰é™ã€‚",
        "example": "æ¯”å¦‚ä½ æœ‰è‚¡ç¥¨ï¼Œä»·æ ¼100å…ƒï¼Œå–å‡ºæ‰§è¡Œä»·105å…ƒçš„çœ‹æ¶¨æœŸæƒï¼Œåˆ«äººç»™ä½ 3å…ƒæƒåˆ©é‡‘ã€‚å¦‚æœè‚¡ç¥¨æ¶¨åˆ°110å…ƒï¼Œä½ æœ€å¤šåªèƒ½105å…ƒå–å‡ºè‚¡ç¥¨ï¼Œèµš3å…ƒæƒåˆ©é‡‘ï¼Œæ¶¨å¾—å¤šå°±ä¸å¤šèµšäº†ã€‚"
    },
    "Protective Put (é˜²æŠ¤æ€§çœ‹è·Œ)": {
        "legs": [
            {'type': 'put', 'position': 'long', 'strike': 95.0, 'premium': 2.0, 'contracts': 1},
        ],
        "description": "ä½ æœ‰è‚¡ç¥¨ï¼Œä½†æ€•è·Œå¾—å‰å®³ï¼Œä¹°ä¸ªçœ‹è·ŒæœŸæƒå½“ä¿é™©ã€‚å¦‚æœè‚¡ç¥¨è·Œäº†ï¼Œå¯ä»¥æŒ‰çº¦å®šä»·å–å‡ºï¼Œå‡å°‘äºæŸã€‚",
        "example": "ä½ æœ‰è‚¡ç¥¨ï¼Œç°ä»·100å…ƒï¼Œä¹°æ‰§è¡Œä»·95å…ƒçœ‹è·ŒæœŸæƒï¼Œä»˜2å…ƒæƒåˆ©é‡‘ã€‚è‚¡ç¥¨è·Œåˆ°90å…ƒï¼Œå¯ä»¥æŒ‰95å…ƒå–å‡ºï¼Œé¿å…å¤§äºã€‚"
    },
    "Bull Call Spread (ç‰›å¸‚çœ‹æ¶¨ä»·å·®)": {
        "legs": [
            {'type': 'call', 'position': 'long', 'strike': 100.0, 'premium': 5.0, 'contracts': 1},
            {'type': 'call', 'position': 'short', 'strike': 110.0, 'premium': 2.0, 'contracts': 1},
        ],
        "description": "ä¹°ä¸€ä¸ªä½ä»·çœ‹æ¶¨æœŸæƒï¼ŒåŒæ—¶å–ä¸€ä¸ªé«˜ä»·çœ‹æ¶¨æœŸæƒï¼ŒèŠ±é’±å°‘ä½†èµšçš„é’±æœ‰é™ï¼Œé€‚åˆè§‰å¾—è‚¡ç¥¨ä¼šæ¶¨ä½†æ¶¨å¹…ä¸å¤§ã€‚",
        "example": "ä¹°100å…ƒæ‰§è¡Œä»·çœ‹æ¶¨æœŸæƒèŠ±5å…ƒï¼ŒåŒæ—¶å–110å…ƒæ‰§è¡Œä»·çœ‹æ¶¨æœŸæƒæ”¶2å…ƒã€‚è‚¡ç¥¨æ¶¨åˆ°105å…ƒï¼Œä½ èµšå·®ä»·ï¼Œä½†æ¶¨åˆ°120å…ƒä¹Ÿåªèƒ½èµšåˆ°110å…ƒé™é¢ã€‚"
    },
    "Bear Put Spread (ç†Šå¸‚çœ‹è·Œä»·å·®)": {
        "legs": [
            {'type': 'put', 'position': 'long', 'strike': 110.0, 'premium': 6.0, 'contracts': 1},
            {'type': 'put', 'position': 'short', 'strike': 100.0, 'premium': 3.0, 'contracts': 1},
        ],
        "description": "ä¹°ä¸€ä¸ªé«˜ä»·çœ‹è·ŒæœŸæƒï¼ŒåŒæ—¶å–ä¸€ä¸ªä½ä»·çœ‹è·ŒæœŸæƒï¼ŒèŠ±é’±å°‘ï¼Œèµšçš„é’±æœ‰é™ï¼Œé€‚åˆè§‰å¾—è‚¡ç¥¨ä¼šè·Œä½†è·Œå¹…æœ‰é™ã€‚",
        "example": "ä¹°110å…ƒæ‰§è¡Œä»·çœ‹è·ŒæœŸæƒèŠ±6å…ƒï¼Œå–100å…ƒæ‰§è¡Œä»·çœ‹è·ŒæœŸæƒæ”¶3å…ƒã€‚è‚¡ç¥¨è·Œåˆ°105å…ƒèµšå·®ä»·ï¼Œä½†è·Œåˆ°90å…ƒæœ€å¤šèµš100å…ƒé™é¢ã€‚"
    },
    "Iron Condor (é“é¹°)": {
        "legs": [
            {'type': 'put', 'position': 'long', 'strike': 90.0, 'premium': 1.0, 'contracts': 1},
            {'type': 'put', 'position': 'short', 'strike': 95.0, 'premium': 2.0, 'contracts': 1},
            {'type': 'call', 'position': 'short', 'strike': 105.0, 'premium': 2.0, 'contracts': 1},
            {'type': 'call', 'position': 'long', 'strike': 110.0, 'premium': 1.0, 'contracts': 1},
        ],
        "description": "åŒæ—¶å–å‡ºçœ‹æ¶¨å’Œçœ‹è·ŒæœŸæƒï¼ŒèµŒè‚¡ç¥¨ä¸ä¼šæ¶¨å¤ªå¤šæˆ–è·Œå¤ªå¤šï¼ŒåŒæ—¶ä¹°ä¸¤ä¸ªä¿æŠ¤æœŸæƒé™åˆ¶é£é™©ã€‚é€‚åˆé¢„æœŸè‚¡ä»·åœ¨åŒºé—´å†…ã€‚",
        "example": "å–å‡º95å…ƒçœ‹è·Œå’Œ105å…ƒçœ‹æ¶¨æœŸæƒï¼Œæ”¶æƒåˆ©é‡‘ï¼ŒåŒæ—¶ä¹°90å…ƒçœ‹è·Œå’Œ110å…ƒçœ‹æ¶¨æœŸæƒé˜²æ­¢äºæŸã€‚"
    },
    "Straddle (è·¨å¼ç»„åˆ)": {
        "legs": [
            {'type': 'call', 'position': 'long', 'strike': 100.0, 'premium': 4.0, 'contracts': 1},
            {'type': 'put', 'position': 'long', 'strike': 100.0, 'premium': 3.5, 'contracts': 1},
        ],
        "description": "åŒæ—¶ä¹°å…¥ç›¸åŒè¡Œæƒä»·çš„çœ‹æ¶¨å’Œçœ‹è·ŒæœŸæƒï¼ŒèµŒè‚¡ç¥¨å¤§æ¶¨æˆ–å¤§è·Œï¼Œä½†ä¸çŸ¥é“æ–¹å‘ã€‚",
        "example": "ä¹°100å…ƒæ‰§è¡Œä»·çœ‹æ¶¨å’Œçœ‹è·ŒæœŸæƒï¼Œè‚¡ç¥¨å¤§æ¶¨æˆ–å¤§è·Œéƒ½å¯èƒ½èµšé’±ã€‚"
    },
    "Strangle (å‹’å¼ç»„åˆ)": {
        "legs": [
            {'type': 'call', 'position': 'long', 'strike': 105.0, 'premium': 2.0, 'contracts': 1},
            {'type': 'put', 'position': 'long', 'strike': 95.0, 'premium': 1.5, 'contracts': 1},
        ],
        "description": "ä¹°ä»·æ ¼ä¸åŒçš„çœ‹æ¶¨å’Œçœ‹è·ŒæœŸæƒï¼ŒèµŒè‚¡ç¥¨ä»·æ ¼çªç ´ä¸€ä¸ªåŒºé—´ï¼Œä¸Šä¸‹å¤§å¹…æ³¢åŠ¨ã€‚",
        "example": "ä¹°105å…ƒçœ‹æ¶¨å’Œ95å…ƒçœ‹è·ŒæœŸæƒï¼ŒæœŸå¾…è‚¡ç¥¨æ¶¨è¿‡105æˆ–è·Œç ´95ã€‚"
    },
    "Butterfly Spread (è¶å¼ä»·å·®)": {
        "legs": [
            {'type': 'call', 'position': 'long', 'strike': 95.0, 'premium': 7.0, 'contracts': 1},
            {'type': 'call', 'position': 'short', 'strike': 100.0, 'premium': 4.0, 'contracts': 2},
            {'type': 'call', 'position': 'long', 'strike': 105.0, 'premium': 2.0, 'contracts': 1},
        ],
        "description": "ä¹°ä½ä»·å’Œé«˜ä»·çœ‹æ¶¨æœŸæƒï¼Œå–ä¸­é—´ä¸¤ä¸ªçœ‹æ¶¨æœŸæƒï¼Œèµšè‚¡ç¥¨ä»·æ ¼åœ¨ä¸­é—´æ—¶çš„æœ€å¤§æ”¶ç›Šã€‚",
        "example": "ä¹°95å…ƒå’Œ105å…ƒçœ‹æ¶¨æœŸæƒå„ä¸€ä»½ï¼Œå–100å…ƒçœ‹æ¶¨æœŸæƒä¸¤ä»½ï¼ŒæœŸå¾…è‚¡ç¥¨ä»·æ ¼æ¥è¿‘100å…ƒã€‚"
    },
    "Calendar Spread (æ—¥å†ä»·å·®)": {
        "legs": [
            {'type': 'call', 'position': 'long', 'strike': 100.0, 'premium': 3.0, 'contracts': 1},
            {'type': 'call', 'position': 'short', 'strike': 100.0, 'premium': 1.5, 'contracts': 1},
        ],
        "description": "ä¹°é•¿æœŸçœ‹æ¶¨æœŸæƒï¼Œå–çŸ­æœŸåŒä»·çœ‹æ¶¨æœŸæƒï¼Œèµšæ—¶é—´ä»·å€¼å·®ä»·ï¼Œé€‚åˆè‚¡ç¥¨ä»·æ ¼çŸ­æœŸæ³¢åŠ¨å°ã€‚",
        "example": "ä¹°3ä¸ªæœˆååˆ°æœŸ100å…ƒçœ‹æ¶¨æœŸæƒï¼Œå–1ä¸ªæœˆååˆ°æœŸ100å…ƒçœ‹æ¶¨æœŸæƒã€‚"
    },
}
